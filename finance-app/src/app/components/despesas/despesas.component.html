<fin-wrap-container>
  <h2>Saídas</h2>
  <hr />
  <p-table
    [value]="transacoes"
    [tableStyle]="{ 'min-width': '50rem' }"
    *ngIf="transacoes.length; else noResultsFound"
    selectionMode="single"
    (onRowSelect)="editarTransacao($event.data)"
    [(selection)]="rowSelected"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Título</th>
        <th>Valor</th>
        <th>Status</th>
        <th>Categoria</th>
        <th>Data</th>
        <th>Metódo</th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-transacao let-rowData>
      <tr [pSelectableRow]="rowData">
        <td>{{ transacao.trs_titulo }}</td>
        <td>{{ transacao.trs_valor | currency : "R$ " }}</td>
        <td>
          <span
            class="ellipsis"
            tooltipPosition="top"
            [pTooltip]="checkStatus(transacao)"
            [ngClass]="
              transacao.trs_status ? 'ellipsis-success' : 'ellipsis-danger'
            "
          ></span>
        </td>
        <td>
          <div
            class="chip"
            [ngStyle]="{ 'background-color': transacao.categoria_cor }"
          >
            {{ transacao.categoria_nome }}
          </div>
        </td>
        <td>{{ transacao.trs_data_ocorrido | date : "dd/MM/yyyy" }}</td>
        <td>{{ transacao.metodo_nome }}</td>
        <td class="d-flex">
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-pencil"
            size="small"
            (click)="editarTransacao(transacao)"
            class="p-button-rounded p-button-text p-button-primary"
          ></button>

          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-trash"
            size="small"
            (click)="deletarTransacao(transacao.trs_id)"
            class="p-button-rounded p-button-text p-button-danger"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <ng-template #noResultsFound>
    <fin-alert-container message="Nenhum registro encontrado." />
  </ng-template>

</fin-wrap-container>
