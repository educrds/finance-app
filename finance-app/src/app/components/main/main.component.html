<fin-column>
  <fin-row *ngIf="somatorio">
    <fin-top-card
      [title]="'Entradas'"
      [value]="somatorio.soma_receitas"
      [isCurrency]="true"
      [className]="'pi pi-arrow-up-right'"
      class="flex-1"
    ></fin-top-card>

    <fin-top-card
      [title]="'Saldo'"
      [value]="somatorio.soma_receitas - somatorio.soma_despesas"
      [className]="'pi pi-arrows-h'"
      [isCurrency]="true"
      class="flex-1"
    ></fin-top-card>

    <fin-top-card
      [title]="'Saídas'"
      [value]="somatorio.soma_despesas"
      [className]="'pi pi-arrow-down-right'"
      [isCurrency]="true"
      class="flex-1"
    ></fin-top-card>
  </fin-row>

  <fin-wrap-container [ngClass]="'w-100'">
    <h2>Transações</h2>
    <hr />
    <p-table
      [value]="transacoes"
      [tableStyle]="{ 'min-width': '50rem', 'max-width': '100vw' }"
      *ngIf="transacoes.length; else noResultsFound"
      selectionMode="single"
      (onRowSelect)="editarTransacao($event.data)"
      [(selection)]="rowSelected"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Tipo</th>
          <th>Título</th>
          <th>Valor</th>
          <th>Status</th>
          <th>Categoria</th>
          <th>Data</th>
          <th>Metódo</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-transacao let-rowData>
        <tr [pSelectableRow]="rowData">
          <td>
            <div class="chip">
              {{ transacao.tipo_transacao }}
            </div>
          </td>
          <td>{{ transacao.trs_titulo }}</td>
          <td>{{ transacao.trs_valor | currency : "R$ " }}</td>
          <td>
            <span
              class="ellipsis"
              tooltipPosition="top"
              [pTooltip]="checkStatus(transacao)"
              [ngClass]="
                transacao.trs_status ? 'ellipsis-success' : 'ellipsis-danger'
              "
            ></span>
          </td>
          <td>
            <div
              class="chip"
              [ngStyle]="{ 'background-color': transacao.categoria_cor }"
            >
              {{ transacao.categoria_nome }}
            </div>
          </td>
          <td>{{ transacao.trs_data_ocorrido | date : "dd/MM/yyyy" }}</td>
          <td>{{ transacao.metodo_nome }}</td>
          <td class="d-flex">
            <button
              pButton
              pRipple
              type="button"
              icon="pi pi-pencil"
              size="small"
              (click)="editarTransacao(transacao)"
              class="p-button-rounded p-button-text p-button-primary"
            ></button>

            <button
              pButton
              pRipple
              type="button"
              icon="pi pi-trash"
              size="small"
              (click)="deletarTransacao(transacao)"
              class="p-button-rounded p-button-text p-button-danger"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <ng-template #noResultsFound>
      <fin-alert-container message="Nenhum registro encontrado." />
    </ng-template>

    <p-confirmDialog></p-confirmDialog>
  </fin-wrap-container>
</fin-column>
